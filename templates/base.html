<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ url_for('static', filename='style/style.css') }}" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/587d1d898c.js" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/taskManager.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <title>{% block title%}Base{% endblock %}</title>
</head>

     <div id="message" class="absolute">
          {% with messages = get_flashed_messages(with_categories=true) %}
               {% if messages %}
                    {% set category, message = messages[-1] %}
                         <p>{{ message }}</p>
               {% endif %}
          {% endwith %}
     </div>

     <body class="bg-stone-900 text-white " id="dashboard-container">
          
          <!-- Desktop menu-->
          <div id="task-container">
               <nav class="font-mono px-4 py-2">
                    <div class="hidden sm:flex place-content-between text-xl">
                         <a href="{{url_for('dashboard')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Dashboard</a>
                         {% if session.get('user_id')  %}
                              <a href="{{url_for('logout')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Logout</a>
                              <a href="{{url_for('export')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Export tasks</a>
                              <a href="{{url_for('create_task')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Create Task</a>
                              <a href="{{url_for('activity_log')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Activity Log</a>
                         {% else %}
                              <a href="{{url_for('logout')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Login</a>
                         {% endif %}
                    </div>


          <!--Mobile menu-->
                    <div x-data="{open:false}" class="sm:hidden relative flex">

                         <button @click="open = !open" class="p-2 text-white">
                              <i class="fa-solid fa-bars text-3xl"></i>
                         </button>
                         
                         <div x-show="open" @click.outside="open = false" class="absolute left-0 top-2 mt-6 w-40 bg-[#1e1e1e] rounded shadow-xl flex flex-col space-y-1 p-2 z-50">
                                   <a href="{{url_for('dashboard')}}" class="p-2 hover:bg-amber-500 hover:text-black rounded">Dashboard</a>
                              {% if session.get('user_id')  %}
                                   <a href="{{url_for('logout')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Logout</a>
                                   <a href="{{url_for('export')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Export tasks</a>
                                   <a href="{{url_for('create_task')}}"class="p-2 hover:bg-amber-500 hover:text-black rounded">Create Task</a>
                              {% else %}
                                   <a href="{{url_for('logout')}}"class="p-2 hover:bg-gray-500 hover:text-black rounded">Login</a>
                              {% endif %}
                         </div>
                         {% block mobile_search %} {% endblock %}
                    </div>     
               </nav>
               {% block content%} {% endblock %}
          </div>  
     </body>
     <script>
          setTimeout(()=> {
               const msg = document.getElementById("message");
               msg.style.opacity = 0;
          },5000);
     </script>
</html>